{% extends "base.html" %}
{% load crispy_forms_filters %}
{% block title %}Cooks | Kitchen Service{% endblock %}

{% block content %}

<div class="cook-list-container">
    <div class="page-header d-flex justify-content-between align-items-center mb-4">
        <div>
            <h1 class="fw-bold mb-0">ğŸ‘¨â€ğŸ³ Cooks</h1>
            <p class="text-muted mb-0">Meet the talented chefs of your kitchen</p>
        </div>
			{% if request.user.is_staff %}
					<a href="{% url 'kitchen:cook-create' %}" class="btn btn-primary shadow-sm rounded-pill px-4">
            + Add New Cook
        </a>
			{% endif %}
    </div>


<div class="card shadow-sm border-0 mb-4 rounded-4">
    <div class="card-body">
      <form method="get" class="row g-2 align-items-center">
        <div class="col-md-10 col-12">
          {{ search_form|crispy }}
        </div>
        <div class="col-md-2 col-12 d-flex justify-content-md-end justify-content-center">
          <button type="submit" class="btn btn-outline-primary rounded-pill px-4 w-100">
            ğŸ” Search
          </button>
        </div>
      </form>
    </div>
  </div>

    {% if cook_list %}
    <div class="cook-grid">
        {% for cook in cook_list %}
        <div class="card cook-card shadow-sm border-0">
            <div class="card-body d-flex align-items-center">
                <!-- Avatar -->
                <div class="avatar-circle bg-primary text-white fw-bold me-3">
                    {{ cook.first_name|default:cook.username|slice:":1"|upper }}
                </div>
                <div class="flex-grow-1">
                    <h5 class="fw-semibold mb-1">{{ cook.get_full_name|default:cook.username }}</h5>
								<p class="text-muted small mb-2">
									@{{ cook.username }}
								</p>
                    <p class="text-muted small mb-2">
                        ğŸ‘¨â€ğŸ³ {{ cook.years_of_experience|default:"0" }} year{% if cook.years_of_experience|default:0 != 1 %}s{% endif %} experience
                    </p>
                    <p class="text-muted small mb-3">
                        ğŸ½ï¸ Responsible for {{ cook.num_dishes }} dish{% if cook.dishes.count != 1 %}es{% endif %}
                    </p>
                </div>
                <div class="d-flex flex-column align-items-end gap-2">
                    <a href="{% url 'kitchen:cook-detail' cook.pk %}" class="btn btn-outline-primary btn-sm rounded-pill px-3">ğŸ‘ï¸ View</a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="alert alert-info text-center shadow-sm rounded-4">
        <p class="mb-0">No cooks added yet. <a href="{% url 'kitchen:cook-create' %}">Add a new cook</a> to get started!</p>
    </div>
    {% endif %}
</div>
{% endblock %}
